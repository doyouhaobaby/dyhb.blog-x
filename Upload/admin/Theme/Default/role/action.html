<include file="public+header">

{script}
<!--
function saveAccess(){

	Dyhb.AjaxSubmit('form1','{:G::U('role/set_action')}');
}
//-->
{/script}

<script src="__PUBLIC__/Images/Admin/ManySelect.js" type="text/javascript"></script>

{style}
<!--
.dyhbManySelect {
	overflow: auto;
	border: 2px inset white;
}
.dyhbManySelect_option {
	border-bottom: 1px solid #eeeeee;
	font: 10pt Tahoma;
	padding: 1px;
	padding-left: 20px;
}
// -->
{/style}

	
	<div class="title"><lang package='role'>操作授权</lang> ( <a href="{:G::U('role/index')}"><lang package='role'>返回角色列表</lang></a> | <a href="{:G::U('role/user?id='.$nGroupId)}"><lang package='role'>用户授权</lang></a> )</div>

	
	<div id="content" class="content">
		<form method="post" id="form1" name='form1'>
		<table class="form-table full">
			<tr>
			<th valign="top"><label for="access"><lang package='role'>授权</lang>：</label></th>
			<td class="importent"><a id="access" href="{:G::U('role/app?group_id='.$nGroupId)}"><lang package='role'>项目授权</lang></a> | <a href="{:G::U('role/module?group_id='.$nGroupId)}"><lang package='role'>模块授权</lang></a> | <span><lang package='role'>操作授权</lang></span>
			</td>
			</tr>
			<tr>
			<th valign="top"><label for="group_id"><lang package='role'>当前组</lang>：</label></th>
			<td><select id="" name="group_id" onchange="location.href = Dyhb.U( 'role/action?group_id='+this.options[this.selectedIndex].value );" ondblclick="" class="field" >
				<option value="" ><lang package='role'>选择组</lang></option>
				<foreach for=arrGroupList>
				<option value="{$key}" {if $nSelectGroupId==$key}selected="selected"{/if}>{$value}</option>
				</foreach>
				</select>
				<div class="description"><lang package='role'>系统组列表，下拉选择</lang></div>
			</td>
			</tr>
			<tr>
			<th valign="top"><label for="appId"><lang package='role'>当前应用</lang>：</label></th>
			<td><select id="appId" name="appId" onchange="location.href = Dyhb.U( 'role/action?group_id={$nGroupId}&app_id='+this.options[this.selectedIndex].value );" ondblclick="" class="medium" >
				<option value="" ><lang package='role'>选择应用</lang></option>
				<foreach for=arrAppList>
				<option value="{$key}" {if $nSelectAppId==$key}selected="selected"{/if}>{$value}</option>
				</foreach>
				</select>
				<div class="description"><lang package='role'>选中组的应用列表</lang></div>
			</td>
			</tr>
			<tr>
			<th valign="top"><label for="moduleId"><lang package='role'>选择模块</lang>：</label></th>
			<td><select id="moduleId" name="moduleId" onchange="location.href = Dyhb.U( 'role/action?group_id={$nGroupId}&app_id={$nAppId}&module_id='+this.options[this.selectedIndex].value );" ondblclick="" class="medium" >
				<option value="" ><lang package='role'>选择模块</lang></option>
				<foreach for=arrModuleList>
				<option value="{$key}" {if $nSelectModuleId==$key}selected="selected"{/if}>{$value}</option>
				</foreach>
				</select>
				<div class="description"><lang package='role'>选中应用的模块列表</lang></div>
			</td>
			</tr>
			<tr>
			<th valign="top"><label for="groupActionId"><lang package='role'>方法</lang>：</label></th>
			<td><select id="groupActionId" name="groupActionId[]" ondblclick="" onchange="" multiple="multiple" class="field" size="15" style="width: 200px; height: 200px">
				<foreach for=arrActionList>
				<option {if in_array($key,$arrGroupActionList)}selected="selected"{/if} value="{$key}">{$value}</option>
				</foreach>
				</select>
				<div class="description"><lang package='role'>选中模块的方法列表</lang></div>
			</td>
			</tr>
			<tr>
			<th valign="top"><label for="field"><lang>操作</lang>：</label></th>
			<td><input type="button" onclick="selectAll()" value="<lang>全 选</lang>" class="button">&nbsp;
			<input type="button" onclick="inverSelect()" value="<lang>反 选</lang>" class="button">&nbsp;
			<input type="button" onclick="unSelectAll()" value="<lang>全 否</lang>" class="button">&nbsp;
			<input type="button" onclick="saveAccess()" value="<lang>保 存</lang>" class="button button-blue">&nbsp;
			<input type="hidden" name="group_id" VALUE="{$nGroupId}" >
			<input type="hidden" name="access_module" value="node">
			<input type="hidden" name="ajax" VALUE="1">
			</td>
			</tr>

			</table>
		</form>
	</div>
	

<include file="public+footer">